(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{48:function(e,t,s){},74:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s(1),a=s.n(c),r=s(35),i=s.n(r),l=(s(43),s(44),s(45),s(48),s(2)),j=s(5),b=s.n(j),o=s(24),d=s(11),u=s(12),p=s(10),m=s(4),x=s(14),h=s(36),O=s.n(h),f=s(15)("accessToken"),v=O.a.create({baseURL:"https://salty-everglades-84208.herokuapp.com/",timeout:3e3,headers:{Authorization:"Bearer "+f}}),g=function(e){var t=e.replies;return Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("h5",{children:"Replies"}),t.length?Object(n.jsx)(n.Fragment,{children:t.map((function(e,t){return Object(n.jsxs)("div",{className:"mb-1 border-bottom",children:[Object(n.jsxs)("div",{class:"d-flex flex-row",children:[Object(n.jsxs)("div",{class:"p-2",children:[" ",Object(n.jsx)("img",{className:"icon-user2",src:"https://picsum.photos/100?random="+e.userid._id})]}),Object(n.jsxs)("div",{class:"pl-0 py-2",children:[Object(n.jsx)("span",{className:"sm-txt",children:Object(n.jsxs)("b",{children:[" ",e.userid.name," "]})}),Object(n.jsx)("br",{})]})]}),Object(n.jsxs)("div",{className:" pb-3 px-3",children:[Object(n.jsxs)("span",{children:[" ",e.reply," "]}),Object(n.jsx)("br",{})]})]},e._id)}))}):Object(n.jsx)("span",{children:" \ud83d\ude15 No replies."})]})},N=s(15),k=function(e){var t=e.p,s=(e.index,e.setshowAddReply),a=e.setreplyto,r=Object(c.useState)(!1),i=Object(m.a)(r,2),l=i[0],j=i[1];return Object(n.jsxs)("div",{className:"mb-3 border-bottom",children:[Object(n.jsxs)("div",{class:"d-flex flex-row",children:[Object(n.jsxs)("div",{class:"p-2",children:[" ",Object(n.jsx)("img",{className:"icon-user",src:"https://picsum.photos/100?random="+t.userid._id})]}),Object(n.jsxs)("div",{class:"p-2",children:[Object(n.jsx)("span",{children:Object(n.jsxs)("b",{children:[" ",t.userid.name," "]})}),Object(n.jsx)("br",{}),Object(n.jsx)("span",{className:"sm-txt text-muted",children:Object(n.jsxs)("b",{children:[" ",t.userid.email," "]})})]})]}),Object(n.jsxs)("div",{className:"pt-2 pb-3 px-3",children:[Object(n.jsxs)("h4",{children:[" ",t.title," "]}),Object(n.jsxs)("span",{children:[" ",t.description," "]}),Object(n.jsx)("br",{}),N("accessToken")?Object(n.jsx)("span",{className:"sm-txt text-primary",onClick:function(){s(!0),a(t._id)},children:" Add Reply "}):null,Object(n.jsxs)("span",{className:"sm-txt text-primary pl-2 ",onClick:function(){return j(!l)},children:[" ",t.replies.length," Replies"]})]}),l&&Object(n.jsx)(g,{replies:t.replies})]},t._id)},y=s(15),w=function(){var e=y("accessToken"),t=Object(c.useState)([]),s=Object(m.a)(t,2),a=s[0],r=s[1],i=Object(c.useState)([]),l=Object(m.a)(i,2),j=l[0],h=l[1],O=Object(c.useState)(!1),f=Object(m.a)(O,2),g=f[0],N=f[1],w=Object(c.useState)(!1),S=Object(m.a)(w,2),C=S[0],F=S[1],T=Object(c.useState)([]),D=Object(m.a)(T,2),A=D[0],q=D[1],R=Object(c.useState)([]),_=Object(m.a)(R,2),L=_[0],E=_[1],I=Object(c.useState)(),U=Object(m.a)(I,2),P=U[0],B=U[1],J=Object(c.useState)(!1),X=Object(m.a)(J,2),z=X[0],M=X[1],W=Object(c.useState)(!1),G=Object(m.a)(W,2),H=(G[0],G[1]),K=function(e){q(Object(p.a)(Object(p.a)({},A),{},Object(u.a)({},e.target.name,e.target.value.trim())))};function Q(){return(Q=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!1),e.prev=1,"/users",e.next=5,v.get("/users");case 5:if(!(t=e.sent).data){e.next=9;break}return console.log(t.data),e.abrupt("return",t.data);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),H(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function V(){return(V=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!1),e.prev=1,"/posts",e.next=5,v.get("/posts");case 5:if(!(t=e.sent).data){e.next=9;break}return console.log(t.data),e.abrupt("return",t.data);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),H(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function Y(){return(Y=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),H(!1),e.prev=2,e.next=5,v.post("/posts",A);case 5:if(t=e.sent,M(!1),N(!1),!t.data){e.next=10;break}return e.abrupt("return",t.data);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),H(e.t0),M(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function Z(){return(Z=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),H(!1),e.prev=2,e.next=5,v.put("/posts/reply/"+P,L);case 5:if(t=e.sent,M(!1),F(!1),!t.data){e.next=10;break}return e.abrupt("return",t.data);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),H(e.t0),M(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function $(e){e.preventDefault(),function(){return Y.apply(this,arguments)}().then((function(e){var t=Object(o.a)(j),s=Object(p.a)({},e);s.userid={userid:e.userid,name:a.name,email:a.email},t.unshift(s),h(t),console.log(s)}))}function ee(e){e.preventDefault(),function(){return Z.apply(this,arguments)}().then((function(e){var t=Object(o.a)(j),s=t.findIndex((function(t){return t._id==e._id}));t[s]=e,h(t),console.log(e,s)}))}return Object(c.useEffect)((function(){e&&function(){return Q.apply(this,arguments)}().then((function(e){r(e)})),function(){return V.apply(this,arguments)}().then((function(e){h(e)}))}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"px-3 pt-3 container bg-white fixed-top",children:Object(n.jsx)("h3",{className:"text-dark logo-txt2 ",children:Object(n.jsx)("b",{children:"Discussion App"})})}),y("accessToken")&&Object(n.jsx)(n.Fragment,{children:g?Object(n.jsxs)("div",{className:"px-3 py-2  container bg-white fixed-bottom",children:[Object(n.jsxs)("div",{className:"col-md-4 m-auto",children:[Object(n.jsxs)("h2",{children:[" Add Discussion ",Object(n.jsx)("button",{className:"btn btn-link btn-sm float-right",onClick:function(){return N(!1)},children:" X "})," "]}),Object(n.jsxs)("form",{onSubmit:function(e){return $(e)},children:[Object(n.jsxs)("div",{className:"form-group ",children:[Object(n.jsx)("span",{children:"Title"}),Object(n.jsx)("input",{onChange:K,type:"text",className:"form-control",required:!0,name:"title"})]}),Object(n.jsxs)("div",{className:"form-group ",children:[Object(n.jsx)("span",{children:"Description"}),Object(n.jsx)("textarea",{onChange:K,type:"text",className:"form-control",required:!0,name:"description"})]}),Object(n.jsx)("div",{className:"mt-2",children:Object(n.jsxs)("button",{type:"submit",className:"btn btn-primary btn-sm btn-block",children:[" ",z?Object(n.jsx)(n.Fragment,{children:"Loading..."}):Object(n.jsx)(n.Fragment,{children:"Submit"})," "]})})]})]})," "]}):null}),y("accessToken")&&Object(n.jsx)(n.Fragment,{children:C?Object(n.jsxs)("div",{className:"px-3 py-2  container bg-white fixed-bottom",children:[Object(n.jsxs)("div",{className:"col-md-4 m-auto",children:[Object(n.jsxs)("h2",{children:[" Add Reply ",Object(n.jsx)("button",{className:"btn btn-link btn-sm float-right",onClick:function(){return F(!1)},children:" X "})," "]}),Object(n.jsxs)("form",{onSubmit:function(e){return ee(e)},children:[Object(n.jsxs)("div",{className:"form-group ",children:[Object(n.jsx)("span",{children:"Reply"}),Object(n.jsx)("input",{onChange:function(e){E(Object(p.a)(Object(p.a)({},L),{},Object(u.a)({},e.target.name,e.target.value.trim())))},type:"text",className:"form-control",required:!0,name:"reply"})]}),Object(n.jsx)("div",{className:"mt-2",children:Object(n.jsxs)("button",{type:"submit",className:"btn btn-primary btn-sm btn-block",children:[" ",z?Object(n.jsx)(n.Fragment,{children:"Loading..."}):Object(n.jsx)(n.Fragment,{children:"Submit"})," "]})})]})]})," "]}):null}),Object(n.jsx)("div",{className:" pt-5 mt-5 ",children:Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"col-md-6 m-auto",children:[Object(n.jsx)("h2",{children:"Welcome!"}),e?Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{class:"d-flex flex-row",children:[Object(n.jsxs)("div",{class:"p-2",children:[" ",Object(n.jsx)("img",{className:"icon-user",src:"https://picsum.photos/100"})]}),Object(n.jsxs)("div",{class:"p-2",children:[Object(n.jsx)("span",{children:Object(n.jsxs)("b",{children:[" ",a.name," "]})}),Object(n.jsx)("br",{}),Object(n.jsx)("span",{className:"sm-txt text-muted",children:Object(n.jsxs)("b",{children:[" ",a.email," "]})}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{className:"btn btn-primary mt-2 btn-sm",onClick:function(){return N(!0)},children:" Add Discussion "})]})]})}):Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"container pl-0",children:[Object(n.jsx)("span",{children:"Please Sign Up to get started!"}),Object(n.jsx)("br",{}),Object(n.jsx)(x.b,{to:"/login",children:Object(n.jsx)("button",{className:"btn btn-primary mt-2 px-4",children:" Sign Up "})})]})}),Object(n.jsx)("h2",{className:"mt-4",children:"Discussions "}),Object(n.jsx)("div",{className:"col-md-8 m-0 p-0",children:j.length?Object(n.jsx)("div",{className:"allposts mt-4",children:j.map((function(e,t){return Object(n.jsx)(k,{p:e,index:t,setshowAddReply:F,setreplyto:B})}))}):null})]})})})]})},S=s(15),C=function(){Object(l.f)();var e=Object(c.useState)([]),t=Object(m.a)(e,2),s=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(m.a)(r,2),j=i[0],o=i[1],x=Object(c.useState)(!1),h=Object(m.a)(x,2),O=h[0],f=h[1],g=Object(c.useState)(!0),N=Object(m.a)(g,2),k=N[0],y=N[1];function w(){return(w=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),f(!1),e.prev=2,e.next=5,v.post("/users",s);case 5:if(!(t=e.sent).data){e.next=8;break}return e.abrupt("return",t.data);case 8:o(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),f(e.t0),o(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function C(){return(C=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),f(!1),e.prev=2,e.next=5,v.post("/users/login",s);case 5:if(!(t=e.sent).data){e.next=8;break}return e.abrupt("return",t.data);case 8:o(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),f(e.t0),o(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}var F=function(e){a(Object(p.a)(Object(p.a)({},s),{},Object(u.a)({},e.target.name,e.target.value.trim())))};function T(e){e.preventDefault(),function(){return w.apply(this,arguments)}().then((function(e){e.accessToken&&(S("accessToken",e.accessToken),S("userid",e.userid),A())}))}function D(e){e.preventDefault(),function(){return C.apply(this,arguments)}().then((function(e){e.accessToken&&(console.log(e),S("accessToken",e.accessToken),S("userid",e.userid),A())}))}function A(){window.location.href="/frontend_discussion/"}return Object(n.jsx)("div",{className:"container ",children:Object(n.jsxs)("div",{className:"jumbotron bg-white col-md-5 m-auto ",children:[Object(n.jsx)("h1",{className:"text-dark logo-txt mb-4 ",children:Object(n.jsx)("b",{children:"Discussion App"})}),Object(n.jsxs)("div",{className:" p-1 ",children:[Object(n.jsx)("button",{className:k?"btn btn-dark":"btn btn-light bg-white",onClick:function(){y(!0),f(!1)},children:"SignUp"}),Object(n.jsx)("button",{className:k?"btn btn-light bg-white ml-2":"btn btn-dark ml-2",onClick:function(){y(!1),f(!1)},children:"LogIn"})]}),k?Object(n.jsxs)("form",{className:"mt-4 px-2",onSubmit:function(e){return T(e)},children:[Object(n.jsxs)("div",{className:"form-group ",children:[Object(n.jsx)("span",{children:"Name"}),Object(n.jsx)("input",{type:"text",className:"form-control",required:!0,name:"name",onChange:F})]}),Object(n.jsxs)("div",{className:"form-group ",children:[Object(n.jsx)("span",{children:"Email"}),Object(n.jsx)("input",{type:"email",className:"form-control",required:!0,name:"email",onChange:F})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("span",{children:"Password"}),Object(n.jsx)("input",{type:"password",className:"form-control",required:!0,name:"password",onChange:F})]}),O&&Object(n.jsxs)("span",{className:"text-danger font-weight-bold",children:["Email already exists try to log in. ",Object(n.jsx)("br",{})]}),Object(n.jsx)("button",{type:"submit",className:"mt-2 btn  btn-primary btn-block",children:j?Object(n.jsx)(n.Fragment,{children:"Loading..."}):Object(n.jsx)(n.Fragment,{children:"SignUp"})})]}):Object(n.jsxs)("form",{className:"mt-4 px-2",onSubmit:function(e){return D(e)},children:[Object(n.jsxs)("div",{className:"form-group ",children:[Object(n.jsx)("span",{children:"Email"}),Object(n.jsx)("input",{type:"email",className:"form-control",required:!0,name:"email",onChange:F})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("span",{children:"Password"}),Object(n.jsx)("input",{type:"password",className:"form-control",required:!0,name:"password",onChange:F})]}),O&&Object(n.jsxs)("span",{className:"text-danger font-weight-bold",children:["Incorrect Email or Password. ",Object(n.jsx)("br",{})]}),Object(n.jsx)("button",{type:"submit",className:"mt-2 btn  btn-primary btn-block",children:j?Object(n.jsx)(n.Fragment,{children:"Loading..."}):Object(n.jsx)(n.Fragment,{children:"LogIn"})})]})]})})};s(15);var F=function(){return Object(n.jsx)("div",{className:"app-div",children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:["/","/home"],component:w}),Object(n.jsx)(l.a,{exact:!0,path:"/login",component:C})]})})};i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(x.a,{children:Object(n.jsx)(F,{})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.a321a751.chunk.js.map