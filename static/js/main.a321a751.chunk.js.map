{"version":3,"sources":["api.js","components/ReplyListComponent.js","components/PostComponent.js","pages/HomePage.js","pages/LoginPage.js","App.js","index.js"],"names":["accessToken","require","ls","axios","create","baseURL","timeout","headers","ReplyListComponent","replies","className","length","map","r","index","class","src","userid","_id","name","reply","PostComponent","p","setshowAddReply","setreplyto","useState","showReplyList","setshowReplyList","email","title","description","onClick","HomePage","user","setUser","posts","setPosts","showAdd","setshowAdd","showAddReply","formData","updateFormData","formDataReply","updateFormDataReply","replyto","loading","setloading","seterr","handleChange","e","target","value","trim","a","get","response","data","console","log","post","put","handleAdd","event","preventDefault","addpost","then","allposts","datacopy","unshift","handleAddReply","addReply","indexofpost","findIndex","useEffect","getUser","getPosts","onSubmit","onChange","type","required","to","LoginPage","useHistory","err","tab","settab","handleSignup","signup","gotohome","handleLogin","login","window","location","href","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a321a751.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst ls = require(\"local-storage\")\r\nvar accessToken = ls(\"accessToken\")\r\nexport default axios.create({\r\n  baseURL: `https://salty-everglades-84208.herokuapp.com/`,\r\n  //baseURL: `http://localhost:8000/`,\r\n  timeout: 3000,\r\n  headers: { 'Authorization': 'Bearer ' + accessToken }\r\n});","import React from 'react'\r\n\r\nexport const ReplyListComponent = ({replies}) => {\r\n    return (\r\n        <div className=\"mb-3\" >\r\n            <h5>Replies</h5>\r\n            {replies.length? <>\r\n                {replies.map((r, index)=>\r\n                     <div className=\"mb-1 border-bottom\" key={r._id} >\r\n                     <div class=\"d-flex flex-row\">\r\n                         <div class=\"p-2\"> <img className=\"icon-user2\" src={\"https://picsum.photos/100?random=\"+r.userid._id} /></div>\r\n                         <div class=\"pl-0 py-2\">\r\n                             <span className=\"sm-txt\" ><b> {r.userid.name} </b></span><br />                             \r\n                         </div>\r\n                     </div>\r\n                     <div className=\" pb-3 px-3\" >\r\n                        <span> {r.reply} </span><br/>                         \r\n                     </div>\r\n                 </div>\r\n                )}\r\n            </>: <span> ðŸ˜• No replies.</span> }\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { ReplyListComponent } from \"./ReplyListComponent\";\r\nconst ls = require(\"local-storage\")\r\nexport const PostComponent = ({ p, index, setshowAddReply, setreplyto}) => {\r\n     var [showReplyList, setshowReplyList] = useState(false)\r\n    return (\r\n                <div className=\"mb-3 border-bottom\" key={p._id} >\r\n                    <div class=\"d-flex flex-row\">\r\n                        <div class=\"p-2\"> <img className=\"icon-user\" src={\"https://picsum.photos/100?random=\"+p.userid._id} /></div>\r\n                        <div class=\"p-2\">\r\n                            <span><b> {p.userid.name} </b></span><br />\r\n                            <span className='sm-txt text-muted' ><b> {p.userid.email} </b></span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"pt-2 pb-3 px-3\" >\r\n                        <h4> {p.title} </h4>\r\n                        <span> {p.description} </span><br/>\r\n                        { ls(\"accessToken\")? <span className=\"sm-txt text-primary\" onClick={() => { setshowAddReply(true); setreplyto(p._id); } } > Add Reply </span> : null}\r\n                        <span className=\"sm-txt text-primary pl-2 \" onClick={()=> setshowReplyList(!showReplyList) } > {p.replies.length} Replies</span>\r\n                    </div>\r\n\r\n                    { showReplyList && <ReplyListComponent replies={p.replies} ></ReplyListComponent> }\r\n\r\n                </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport axios from \"../api\"\r\nimport { PostComponent } from \"../components/PostComponent\";\r\nconst ls = require(\"local-storage\")\r\nexport const HomePage = () => {\r\n    const accessToken = ls(\"accessToken\")\r\n    var [user, setUser] = useState([])\r\n    var [posts, setPosts] = useState([])\r\n    var [showAdd, setshowAdd] = useState(false)\r\n    var [showAddReply, setshowAddReply] = useState(false)\r\n    var [formData, updateFormData] = useState([]);\r\n    var [formDataReply, updateFormDataReply] = useState([]);\r\n    var [replyto, setreplyto] = useState()\r\n    var [loading, setloading] = useState(false);\r\n    var [err, seterr] = useState(false);\r\n    \r\n    const handleChange = (e) => {\r\n        updateFormData({\r\n          ...formData,\r\n          [e.target.name]: e.target.value.trim()\r\n        });\r\n      };\r\n\r\n    const handleChangeReply = (e) => {\r\n        updateFormDataReply({\r\n          ...formDataReply,\r\n          [e.target.name]: e.target.value.trim()\r\n        });\r\n      };\r\n    \r\n    async function getUser() {\r\n        seterr(false)\r\n        try {\r\n            let url = \"/users\"\r\n            const response = await axios.get(url);\r\n            if (response.data) {\r\n                console.log(response.data)\r\n                return response.data\r\n            }\r\n        } catch (error) {\r\n            seterr(error)\r\n        }\r\n    }\r\n    \r\n    async function getPosts() {\r\n        seterr(false)\r\n        try {\r\n            let url = \"/posts\"\r\n            const response = await axios.get(url);\r\n            if (response.data) {\r\n                console.log(response.data)\r\n                return response.data\r\n            }\r\n        } catch (error) {\r\n            seterr(error)\r\n        }\r\n    }\r\n\r\n    async function addpost() {\r\n        setloading(true)\r\n        seterr(false)\r\n        try {\r\n          const response = await axios.post('/posts', formData);\r\n          setloading(false)\r\n          setshowAdd(false)\r\n          if (response.data) {\r\n            return response.data\r\n          }\r\n        } catch (error) {\r\n          seterr(error);\r\n          setloading(false)\r\n        }\r\n      }\r\n\r\n    async function addReply() {\r\n        setloading(true)\r\n        seterr(false)\r\n        try {\r\n          const response = await axios.put('/posts/reply/'+replyto , formDataReply);\r\n          setloading(false)\r\n          setshowAddReply(false)\r\n          if (response.data) {\r\n            return response.data\r\n          }\r\n        } catch (error) {\r\n          seterr(error);\r\n          setloading(false)\r\n        }\r\n      }\r\n\r\n    function handleAdd(event) {\r\n        event.preventDefault();\r\n        addpost().then(data => {\r\n            let allposts = [...posts]\r\n            let datacopy = {...data}\r\n            datacopy.userid = { userid: data.userid, name: user.name, email: user.email }\r\n            allposts.unshift(datacopy)\r\n            setPosts(allposts)\r\n          console.log(datacopy)\r\n        })\r\n      }\r\n\r\n    function handleAddReply(event) {\r\n        event.preventDefault();\r\n        addReply().then(data => {\r\n            let allposts = [...posts]\r\n            let indexofpost = allposts.findIndex( p =>  p._id == data._id  )\r\n            allposts[indexofpost] = data\r\n            setPosts(allposts)\r\n          console.log(data, indexofpost)\r\n        })\r\n      }\r\n\r\n    useEffect(() => {\r\n        if(accessToken){\r\n        getUser().then(data => {\r\n            setUser(data)\r\n        })}\r\n        getPosts().then(data => {\r\n            setPosts(data)\r\n        })\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"px-3 pt-3 container bg-white fixed-top\" > \r\n                <h3 className=\"text-dark logo-txt2 \" ><b>Discussion App</b></h3>\r\n            </div>\r\n             \r\n            { ls(\"accessToken\") &&\r\n            <>\r\n                { showAdd ? \r\n            <div className=\"px-3 py-2  container bg-white fixed-bottom\" >\r\n            <div className=\"col-md-4 m-auto\" >\r\n                <h2> Add Discussion <button className=\"btn btn-link btn-sm float-right\" onClick={() => setshowAdd(false) } > X </button> </h2>\r\n            <form onSubmit={(event) => handleAdd(event)}>\r\n            <div className=\"form-group \">\r\n              <span >Title</span>\r\n              <input onChange={handleChange} type=\"text\" className=\"form-control\" required name=\"title\" />\r\n            </div>\r\n            <div className=\"form-group \">\r\n              <span >Description</span>\r\n              <textarea onChange={handleChange} type=\"text\" className=\"form-control\" required name=\"description\" ></textarea>\r\n            </div>\r\n            <div className=\"mt-2\" >\r\n                <button type=\"submit\" className=\"btn btn-primary btn-sm btn-block\" > {loading ? <>Loading...</> : <>Submit</>} </button>\r\n            </div>\r\n            </form>\r\n            </div> </div> : null }\r\n            </> }\r\n            \r\n            { ls(\"accessToken\") &&\r\n            <>\r\n                { showAddReply ? \r\n            <div className=\"px-3 py-2  container bg-white fixed-bottom\" >\r\n            <div className=\"col-md-4 m-auto\" >\r\n                <h2> Add Reply <button className=\"btn btn-link btn-sm float-right\" onClick={() => setshowAddReply(false) } > X </button> </h2>\r\n            <form onSubmit={(event) => handleAddReply(event)}>\r\n            <div className=\"form-group \">\r\n              <span >Reply</span>\r\n              <input onChange={handleChangeReply} type=\"text\" className=\"form-control\" required name=\"reply\" />\r\n            </div>\r\n            <div className=\"mt-2\" >\r\n                <button type=\"submit\" className=\"btn btn-primary btn-sm btn-block\" > {loading ? <>Loading...</> : <>Submit</>} </button>\r\n            </div>\r\n            </form>\r\n            </div> </div> : null }\r\n            </> }\r\n            \r\n            <div className=\" pt-5 mt-5 \" >\r\n               <div  >\r\n                   <div className=\"col-md-6 m-auto\" >\r\n                       <h2>Welcome!</h2>           \r\n                      { accessToken ? <>\r\n                            <div class=\"d-flex flex-row\">\r\n                                <div class=\"p-2\"> <img className=\"icon-user\" src=\"https://picsum.photos/100\" /></div>\r\n                                <div class=\"p-2\"> \r\n                                <span><b> {user.name} </b></span><br/>\r\n                                <span className='sm-txt text-muted' ><b> {user.email} </b></span><br/>\r\n                                <button className=\"btn btn-primary mt-2 btn-sm\" onClick={ () => setshowAdd(true) } > Add Discussion </button>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                           </>:\r\n                           <>\r\n                           <div className=\"container pl-0\" >\r\n                           <span>Please Sign Up to get started!</span><br/>\r\n                           <Link to={'/login'} >\r\n                            <button className=\"btn btn-primary mt-2 px-4\" > Sign Up </button>\r\n                            </Link>\r\n                           </div>\r\n                           </>\r\n                           }\r\n\r\n                        <h2 className=\"mt-4\" >Discussions </h2>   \r\n                        <div className=\"col-md-8 m-0 p-0\" >\r\n                           { posts.length ?  \r\n                            <div className=\"allposts mt-4\" >\r\n                                {posts.map((p, index) =>  <PostComponent p={p} index={index} setshowAddReply={setshowAddReply} setreplyto={setreplyto} ></PostComponent> )}                          \r\n                           </div>\r\n                           : null }\r\n                        </div>\r\n                   </div>\r\n               </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from '../api'\r\nconst ls = require('local-storage')\r\n\r\nexport const LoginPage = () => {\r\n  const history = useHistory()\r\n  var [formData, updateFormData] = useState([]);\r\n  var [loading, setloading] = useState(false);\r\n  var [err, seterr] = useState(false);\r\n  var [tab, settab] = useState(true)\r\n  \r\n  async function signup() {\r\n    setloading(true)\r\n    seterr(false)\r\n    try {\r\n      const response = await axios.post('/users', formData);\r\n      if (response.data) {\r\n        return response.data\r\n      }\r\n      setloading(false)\r\n    } catch (error) {\r\n      seterr(error);\r\n      setloading(false)\r\n    }\r\n  }\r\n\r\n  async function login() {\r\n    setloading(true)\r\n    seterr(false)\r\n    try {\r\n      const response = await axios.post('/users/login', formData);\r\n      if (response.data) {\r\n        return response.data\r\n      }\r\n      setloading(false)\r\n    } catch (error) {\r\n      seterr(error);\r\n      setloading(false)\r\n    }\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    updateFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value.trim()\r\n    });\r\n  };\r\n\r\n  function handleSignup(event) {\r\n    event.preventDefault();\r\n    signup().then(data => {\r\n      if (data.accessToken) {\r\n        ls(\"accessToken\", data.accessToken);\r\n        ls(\"userid\", data.userid);\r\n        gotohome()\r\n      }\r\n    })\r\n  }\r\n\r\n  function handleLogin(event) {\r\n    event.preventDefault();\r\n    login().then(data => {\r\n      if (data.accessToken) {\r\n        console.log(data)\r\n        ls(\"accessToken\", data.accessToken);\r\n        ls(\"userid\", data.userid);\r\n        gotohome()\r\n      }\r\n    })\r\n  }\r\n  \r\n  function gotohome() {\r\n    window.location.href = \"/frontend_discussion/\"\r\n  }\r\n\r\n  return (\r\n    <div className=\"container \" >\r\n      <div className=\"jumbotron bg-white col-md-5 m-auto \" >\r\n        \r\n        <h1 className=\"text-dark logo-txt mb-4 \" ><b>Discussion App</b></h1>\r\n\r\n        <div className=\" p-1 \" >\r\n\r\n          <button className={tab ? \"btn btn-dark\" : \"btn btn-light bg-white\"} onClick={() => { settab(true); seterr(false) }} >SignUp</button>\r\n          <button className={!tab ? \"btn btn-dark ml-2\" : \"btn btn-light bg-white ml-2\"} onClick={() => { settab(false); seterr(false) }} >LogIn</button>\r\n\r\n        </div>\r\n        {tab ?\r\n          <form className=\"mt-4 px-2\" onSubmit={(event) => handleSignup(event)}>\r\n            <div className=\"form-group \">\r\n              <span >Name</span>\r\n              <input type=\"text\" className=\"form-control\" required name=\"name\" onChange={handleChange} />\r\n            </div>\r\n            <div className=\"form-group \">\r\n              <span>Email</span>\r\n              <input type=\"email\" className=\"form-control\" required name=\"email\" onChange={handleChange} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <span  >Password</span>\r\n              <input type=\"password\" className=\"form-control\" required name=\"password\" onChange={handleChange} />\r\n            </div>\r\n\r\n            {err &&\r\n              <span className=\"text-danger font-weight-bold\">Email already exists try to log in. <br /></span>\r\n            }\r\n            <button type=\"submit\" className=\"mt-2 btn  btn-primary btn-block\">\r\n              {loading ? <>Loading...</> : <>SignUp</>}\r\n            </button>\r\n          </form>\r\n          :\r\n          <form className=\"mt-4 px-2\" onSubmit={(event) => handleLogin(event)}>\r\n            <div className=\"form-group \">\r\n              <span>Email</span>\r\n              <input type=\"email\" className=\"form-control\" required name=\"email\" onChange={handleChange} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <span>Password</span>\r\n              <input type=\"password\" className=\"form-control\" required name=\"password\" onChange={handleChange} />\r\n            </div>\r\n            {err &&\r\n              <span className=\"text-danger font-weight-bold\">Incorrect Email or Password. <br /></span>\r\n            }\r\n            <button type=\"submit\" className=\"mt-2 btn  btn-primary btn-block\">\r\n              {loading ? <>Loading...</> : <>LogIn</>}\r\n            </button>\r\n          </form>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { Switch, Route, Redirect } from 'react-router-dom'\r\nimport { HomePage } from './pages/HomePage'\r\nimport { LoginPage } from './pages/LoginPage'\r\n\r\nconst ls = require(\"local-storage\")\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"app-div\">\r\n      <Switch>\r\n        {/* <Route exact path={[\"/\", \"/home\"]}>\r\n          {ls('accessToken') ? <HomePage></HomePage> : <Redirect to={'/login'}></Redirect>}\r\n        </Route> */}\r\n        <Route exact path={[\"/\", \"/home\"]} component={HomePage}></Route>\r\n        <Route exact path=\"/login\" component={LoginPage}></Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport 'jquery/dist/jquery.slim'\r\nimport 'bootstrap/dist/js/bootstrap';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { HashRouter as Router} from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router>\r\n    <App />\r\n    </Router>\r\n  </React.StrictMode>, \r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}